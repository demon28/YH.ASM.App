(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/support/create","components/uni-list-item/uni-list-item","components/uni-list/uni-list"],{"09de":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("2f62"),i=(u(n("d475")),u(n("79c8")),n("1f6d")),r=u(n("f03f")),a=u(n("b066")),c=u(n("aae1"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={computed:s({},(0,o.mapState)(["userId","supportProject","supportConductor","supportCopy","supportMachine","hasLogin"]),{endDate:function(){return this.getDate("end")}}),components:{},data:function(){var e=this.getDate({format:!0});return{list:[],project:{},machine:{},content:"",Severity:0,SeverityList:this.Support_Severitylist(),SupportTypelist:this.Support_Typelist(),conductor:{},finddate:e,copy:[],uploadfile:[],filelist:[],fileStatus:"",type:0}},onShow:function(e){var t=this,n=t.supportProject;console.log("===========哎哟，wx不执行吗"+JSON.stringify(n)),null!=n&&n.length>0?t.project=n[0]:(console.log("=========== this.project.name"),t.project={name:"请选择",code:""});var o=t.supportConductor;null!=o&&o.length>0?t.conductor=o[0]:(console.log("=========== this.conductor.name"),t.conductor={name:"请选择"});var i=t.supportMachine;null!=i&&i.length>0?t.machine=i[0]:(console.log("=========== this.conductor.name"),t.machine={name:"请选择",serial:""});var r=t.supportCopy;null!=r&&r.length>0&&(t.copy=r)},mounted:function(){console.log("我是可以获取到值的："+this.supportProject)},methods:{Support_Severitylist:i.Support_Severitylist,Support_Typelist:i.Support_Typelist,onSubmit:function(){var t=this,n=t.verifyParameters();if(n.res){var o={};o.CreatorId=t.userId,o.ConductorId=t.conductor.uuid,o.ProjectId=t.project.id,o.Severity=t.Severity,o.FindDate=t.finddate,o.Title="",o.Content=t.content,o.Mid=t.machine.id,console.log(t.filelist),o.Filelist=t.filelist,o.Type=t.type;var i="";if(t.copy.length>0){for(var a=0;a<t.copy.length;a++)i+=t.copy[a].uuid+",";i=i.substring(0,i.length-1),o.Push={CONDUCTOR:t.conductor.uuid,CC:i,POINT:0}}var u=JSON.stringify(o),l="/api/Support/Create",s=c.default.Parameters.ApiKey,f=Math.round((new Date).getTime()/1e3),d=r.default.Singin(l,u,s,f);e.showLoading({title:"提交中"}),console.log("请求参数jsonString:"+u),console.log("请求参数path:"+l),console.log("请求参数apikey:"+s),console.log("请求参数timestamp:"+f),console.log("请求参数Singinkey:"+d),e.request({url:c.default.Parameters.LoginHost()+l,data:o,method:"POST",header:{"content-type":"application/json",timestamp:f,SigningKey:d},success:function(t){e.hideLoading(),console.log(t),console.log("看看json字符串"+JSON.stringify(t)),200==t.statusCode?t.data.Success?e.showModal({content:"提交成功，返回首页！",showCancel:!1,success:function(t){t.confirm&&(console.log("回到首页"),e.reLaunch({url:"../main/main"}))}}):e.showToast({icon:"none",title:t.data.Message}):e.showToast({icon:"none",title:"请填写正确的参数信息"})},fail:function(t){console.log(t),e.hideLoading(),e.showToast({icon:"none",title:"网络请求失败！"})}})}else e.showToast({icon:"none",title:n.message})},bindPickerChange:function(e){this.Severity=e.target.value},bindPickerChangeType:function(e){this.type=e.target.value},getDate:function(e){var t=new Date,n=t.getFullYear(),o=t.getMonth()+1,i=t.getDate();return"start"===e?n-=60:"end"===e&&(n+=2),o=o>9?o:"0"+o,i=i>9?i:"0"+i,"".concat(n,"-").concat(o,"-").concat(i)},bindDateChange:function(e){this.finddate=e.target.value},onFillUser:function(){e.navigateTo({url:"../user/fillUser?isSingle=true&type=conductor"})},onFillProject:function(){e.navigateTo({url:"../project/fillProject?isSingle=true"})},onFillCopy:function(){e.navigateTo({url:"../user/fillUser?isSingle=false&type=copy"})},onFillMachine:function(){e.navigateTo({url:"../machine/fillMachine?isSingle=true"})},onUpload:function(){var t=this;e.chooseMedia({count:1,mediaType:["image","video"],sourceType:["album","camera"],maxDuration:30,camera:"back",success:function(n){console.log("选择的文件====="+JSON.stringify(n));var o="image"==n.type?"图片":"视频";t.uploadfile=n.tempFiles,t.uploadfile[0].type=o,t.fileStatus="上传中...",e.showLoading({title:o+"，上传中..."}),console.log("我要上传的文件路径"+t.uploadfile[0].tempFilePath);var i={SigningKey:t.ApiKey,userid:t.userId};console.log("上传参数："+JSON.stringify(i)),e.uploadFile({url:c.default.Parameters.LoginHost()+"/api/Upload/UploadFile",filePath:t.uploadfile[0].tempFilePath,name:"file",formData:i,header:{"Content-Type":"multipart/form-data"},success:function(n){console.log(n),console.log("文件上传成功，返回值："+JSON.stringify(n.data)),t.fileStatus="上传成功",e.hideLoading(),e.showToast({title:"上传成功！"}),t.filelist=[];var o=JSON.parse(n.data),i={ID:o.Content.ID,FILENAME:o.Content.FILENAME};console.log("填充文件列表："+JSON.stringify(i)),t.filelist.push(i)},fail:function(n){console.log("上传文件失败====="+JSON.stringify(n)),t.fileStatus="上传失败",e.hideLoading(),e.showToast({title:"上传失败！",icon:"none"})}})}})},verifyParameters:function(){var e=this,t={res:!0,message:""};return console.log("项目："+JSON.stringify(e.project)),a.default.isNotNull(e.userId)?a.default.itemHasKeyVer(e.project,"id")?a.default.itemHasKeyVer(e.machine,"id")?(console.log("处理人："+JSON.stringify(e.conductor)),a.default.itemHasKeyVer(e.conductor,"uuid")?a.default.isNotNullTrim(e.content)?t:(t.res=!1,t.message="请填写问题描述",t):(t.res=!1,t.message="请选择处理人",t)):(t.res=!1,t.message="请填写问题机型",t):(t.res=!1,t.message="请选择项目",t):(t.res=!1,t.message="登录已失效，请重新登录！",t)},clearCC:function(){this.copy=[]}}};t.default=d}).call(this,n("543d")["default"])},"0cab":function(e,t,n){},"18f9":function(e,t,n){"use strict";var o,i=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}))},"22c0":function(e,t,n){"use strict";(function(e){n("5a3b");o(n("66fd"));var t=o(n("4813"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"2f7e":function(e,t,n){"use strict";n.r(t);var o=n("09de"),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},4813:function(e,t,n){"use strict";n.r(t);var o=n("18f9"),i=n("2f7e");for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("f73c");var a,c=n("f0c5"),u=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);t["default"]=u.exports},"63c6":function(e,t,n){},6971:function(e,t,n){"use strict";var o=n("6c4f"),i=n.n(o);i.a},"6c4f":function(e,t,n){},"79c8":function(e,t,n){"use strict";n.r(t);var o=n("db2e"),i=n("dca6");for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("6971");var a,c=n("f0c5"),u=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"a9798df4",null,!1,o["a"],a);t["default"]=u.exports},"7bee":function(e,t,n){"use strict";var o=n("0cab"),i=n.n(o);i.a},"8b47":function(e,t,n){"use strict";n.r(t);var o=n("df8c"),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"9a5b":function(e,t,n){"use strict";var o={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(n.bind(null,"e846"))},uniBadge:function(){return n.e("components/uni-badge/uni-badge").then(n.bind(null,"934c"))}},i=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}))},ce8a:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"UniList","mp-weixin":{options:{multipleSlots:!1}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1}},provide:function(){return{list:this}},created:function(){this.firstChildAppend=!1},methods:{loadMore:function(e){this.$emit("scrolltolower")}}};t.default=o},d475:function(e,t,n){"use strict";n.r(t);var o=n("9a5b"),i=n("8b47");for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("7bee");var a,c=n("f0c5"),u=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"5d52aada",null,!1,o["a"],a);t["default"]=u.exports},db2e:function(e,t,n){"use strict";var o,i=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}))},dca6:function(e,t,n){"use strict";n.r(t);var o=n("ce8a"),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},df8c:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(function(){return resolve(n("e846"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/uni-badge/uni-badge").then(function(){return resolve(n("934c"))}.bind(null,n)).catch(n.oe)},r={name:"UniListItem",components:{uniIcons:o,uniBadge:i},props:{title:{type:String,default:""},note:{type:String,default:""},disabled:{type:[Boolean,String],default:!1},showArrow:{type:[Boolean,String],default:!0},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},rightText:{type:String,default:""},thumb:{type:String,default:""},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:function(){return{type:"contact",color:"#000000",size:20}}}},inject:["list"],data:function(){return{isFirstChild:!1}},mounted:function(){this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0)},methods:{onClick:function(){this.$emit("click")},onSwitchChange:function(e){this.$emit("switchChange",e.detail)}}};t.default=r},f73c:function(e,t,n){"use strict";var o=n("63c6"),i=n.n(o);i.a}},[["22c0","common/runtime","common/vendor"]]]);