(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/support/create","components/uni-list-item/uni-list-item","components/uni-list/uni-list"],{"09de":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2f62"),i=(c(n("d475")),c(n("79c8")),n("1f6d")),r=c(n("f03f")),a=c(n("b066"));function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={computed:l({},(0,o.mapState)(["userId","supportProject","supportConductor","supportCopy","supportMachine"]),{endDate:function(){return this.getDate("end")}}),components:{},data:function(){var t=this.getDate({format:!0});return{list:[],project:{},machine:{},content:"",Severity:0,SeverityList:this.Support_Severitylist(),conductor:{},finddate:t,copy:[],uploadfile:[],filelist:[],fileStatus:""}},onShow:function(t){var e=this,n=e.supportProject;console.log("===========哎哟，wx不执行吗"+JSON.stringify(n)),null!=n&&n.length>0?e.project=n[0]:(console.log("=========== this.project.name"),e.project={name:"请选择"});var o=e.supportConductor;null!=o&&o.length>0?e.conductor=o[0]:(console.log("=========== this.conductor.name"),e.conductor={name:"请选择"});var i=e.supportMachine;null!=i&&i.length>0?e.machine=i[0]:(console.log("=========== this.conductor.name"),e.machine={name:"请选择",serial:""});var r=e.supportCopy;null!=r&&r.length>0&&(e.copy=r)},mounted:function(){console.log("我是可以获取到值的："+this.supportProject)},methods:{Support_Severitylist:i.Support_Severitylist,onSubmit:function(){var e=this,n=e.verifyParameters();if(n.res){var o={};o.CreatorId=e.userId,o.ConductorId=e.conductor.uuid,o.ProjectId=e.project.id,o.Severity=e.Severity,o.FindDate=e.finddate,o.Title="",o.Content=e.content,o.Mid=e.machine.id,console.log(e.filelist),o.Filelist=e.filelist;var i="";if(e.copy.length>0){for(var a=0;a<e.copy.length;a++)i+=e.copy[a].uuid+",";i=i.substring(0,i.length-1),o.Push={CONDUCTOR:e.conductor.uuid,CC:i,POINT:0}}var c=JSON.stringify(o),u="/api/Support/Create",l=this.ApiKey,s=Math.round((new Date).getTime()/1e3),f=r.default.Singin(u,c,l,s);t.showLoading({title:"提交中"}),console.log("请求参数jsonString:"+c),console.log("请求参数path:"+u),console.log("请求参数apikey:"+l),console.log("请求参数timestamp:"+s),console.log("请求参数Singinkey:"+f),t.request({url:this.LoginHost+u,data:o,method:"POST",header:{"content-type":"application/json",timestamp:s,SigningKey:f},success:function(e){t.hideLoading(),console.log(e),console.log("看看json字符串"+JSON.stringify(e)),200==e.statusCode?e.data.Success?t.showModal({content:"提交成功，返回首页！",showCancel:!1,success:function(e){e.confirm&&(console.log("回到首页"),t.reLaunch({url:"../main/main"}))}}):t.showToast({icon:"none",title:e.data.Message}):t.showToast({icon:"none",title:"请填写正确的参数信息"})},fail:function(e){console.log(e),t.hideLoading(),t.showToast({icon:"none",title:"网络请求失败！"})}})}else t.showToast({icon:"none",title:n.message})},bindPickerChange:function(t){this.Severity=t.target.value},getDate:function(t){var e=new Date,n=e.getFullYear(),o=e.getMonth()+1,i=e.getDate();return"start"===t?n-=60:"end"===t&&(n+=2),o=o>9?o:"0"+o,i=i>9?i:"0"+i,"".concat(n,"-").concat(o,"-").concat(i)},bindDateChange:function(t){this.finddate=t.target.value},onFillUser:function(){t.navigateTo({url:"../user/fillUser?isSingle=true&type=conductor"})},onFillProject:function(){t.navigateTo({url:"../project/fillProject?isSingle=true"})},onFillCopy:function(){t.navigateTo({url:"../user/fillUser?isSingle=false&type=copy"})},onFillMachine:function(){t.navigateTo({url:"../machine/fillMachine?isSingle=true"})},onUpload:function(){var e=this;t.chooseMedia({count:1,mediaType:["image","video"],sourceType:["album","camera"],maxDuration:30,camera:"back",success:function(n){console.log("选择的文件====="+JSON.stringify(n));var o="image"==n.type?"图片":"视频";e.uploadfile=n.tempFiles,e.uploadfile[0].type=o,e.fileStatus="上传中...",t.showLoading({title:o+"，上传中..."}),console.log("我要上传的文件路径"+e.uploadfile[0].tempFilePath);var i={SigningKey:e.ApiKey,userid:e.userId};console.log("上传参数："+JSON.stringify(i)),t.uploadFile({url:e.LoginHost+"/api/Upload/UploadFile",filePath:e.uploadfile[0].tempFilePath,name:"file",formData:i,header:{"Content-Type":"multipart/form-data"},success:function(n){console.log(n),console.log("文件上传成功，返回值："+JSON.stringify(n.data)),e.fileStatus="上传成功",t.hideLoading(),t.showToast({title:"上传成功！"}),e.filelist=[];var o=JSON.parse(n.data),i={ID:o.Content.ID,FILENAME:o.Content.FILENAME};console.log("填充文件列表："+JSON.stringify(i)),e.filelist.push(i)},fail:function(n){console.log("上传文件失败====="+JSON.stringify(n)),e.fileStatus="上传失败",t.hideLoading(),t.showToast({title:"上传失败！",icon:"none"})}})}})},verifyParameters:function(){var t=this,e={res:!0,message:""};return console.log("项目："+JSON.stringify(t.project)),a.default.itemHasKeyVer(t.project,"id")||(e.res=!1,e.message="请选择项目"),a.default.itemHasKeyVer(t.machine,"id")||(e.res=!1,e.message="请填写问题机型"),console.log("处理人："+JSON.stringify(t.conductor)),a.default.itemHasKeyVer(t.conductor,"uuid")||(e.res=!1,e.message="请选择处理人"),a.default.isNotNullTrim(t.content)||(e.res=!1,e.message="请填写问题描述"),e}}};e.default=f}).call(this,n("543d")["default"])},"0cab":function(t,e,n){},"17f5":function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}))},"22c0":function(t,e,n){"use strict";(function(t){n("5a3b");o(n("66fd"));var e=o(n("4813"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"2f7e":function(t,e,n){"use strict";n.r(e);var o=n("09de"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},4813:function(t,e,n){"use strict";n.r(e);var o=n("17f5"),i=n("2f7e");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("f73c");var a,c=n("f0c5"),u=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=u.exports},"63c6":function(t,e,n){},6971:function(t,e,n){"use strict";var o=n("6c4f"),i=n.n(o);i.a},"6c4f":function(t,e,n){},"79c8":function(t,e,n){"use strict";n.r(e);var o=n("db2e"),i=n("dca6");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("6971");var a,c=n("f0c5"),u=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"a9798df4",null,!1,o["a"],a);e["default"]=u.exports},"7bee":function(t,e,n){"use strict";var o=n("0cab"),i=n.n(o);i.a},"8b47":function(t,e,n){"use strict";n.r(e);var o=n("df8c"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},"9a5b":function(t,e,n){"use strict";var o={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(n.bind(null,"e846"))},uniBadge:function(){return n.e("components/uni-badge/uni-badge").then(n.bind(null,"934c"))}},i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}))},ce8a:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"UniList","mp-weixin":{options:{multipleSlots:!1}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1}},provide:function(){return{list:this}},created:function(){this.firstChildAppend=!1},methods:{loadMore:function(t){this.$emit("scrolltolower")}}};e.default=o},d475:function(t,e,n){"use strict";n.r(e);var o=n("9a5b"),i=n("8b47");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("7bee");var a,c=n("f0c5"),u=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"5d52aada",null,!1,o["a"],a);e["default"]=u.exports},db2e:function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}))},dca6:function(t,e,n){"use strict";n.r(e);var o=n("ce8a"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},df8c:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(function(){return resolve(n("e846"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/uni-badge/uni-badge").then(function(){return resolve(n("934c"))}.bind(null,n)).catch(n.oe)},r={name:"UniListItem",components:{uniIcons:o,uniBadge:i},props:{title:{type:String,default:""},note:{type:String,default:""},disabled:{type:[Boolean,String],default:!1},showArrow:{type:[Boolean,String],default:!0},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},rightText:{type:String,default:""},thumb:{type:String,default:""},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:function(){return{type:"contact",color:"#000000",size:20}}}},inject:["list"],data:function(){return{isFirstChild:!1}},mounted:function(){this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0)},methods:{onClick:function(){this.$emit("click")},onSwitchChange:function(t){this.$emit("switchChange",t.detail)}}};e.default=r},f73c:function(t,e,n){"use strict";var o=n("63c6"),i=n.n(o);i.a}},[["22c0","common/runtime","common/vendor"]]]);